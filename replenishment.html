<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TG KILLER WebApp</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --primary-color: #0088cc;
            --secondary-color: #f5f5f5;
            --error-color: #dc3545;
            --success-color: #28a745;
            --text-color: #333333;
            --border-color: #dddddd;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }
        
        body {
            background-color: var(--secondary-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 0;
            margin: 0;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
        }
        
        .header {
            background-color: var(--primary-color);
            color: white;
            padding: 15px 20px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 68px;
            background: white;
            z-index: 99;
        }
        
        .tab {
            flex: 1;
            text-align: center;
            padding: 12px;
            cursor: pointer;
            background-color: #f8f9fa;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .tab.active {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
        }
        
        .tab-content {
            display: none;
            padding: 20px;
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .tab-content.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: var(--primary-color);
            outline: none;
        }
        
        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 14px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
            transition: all 0.3s;
        }
        
        button:hover {
            background-color: #006699;
            transform: translateY(-1px);
        }
        
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .status {
            padding: 12px;
            border-radius: 8px;
            margin-top: 15px;
            text-align: center;
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }
        
        .success {
            background-color: var(--success-color);
            color: white;
            display: block;
        }
        
        .error {
            background-color: var(--error-color);
            color: white;
            display: block;
        }
        
        .loading {
            text-align: center;
            padding: 20px;
            display: none;
        }
        
        .spinner {
            border: 4px solid rgba(0,0,0,0.1);
            border-radius: 50%;
            border-top: 4px solid var(--primary-color);
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .footer {
            text-align: center;
            padding: 15px;
            color: #666666;
            font-size: 14px;
        }
        
        /* Адаптация для маленьких экранов */
        @media (max-width: 480px) {
            .header {
                padding: 12px 15px;
            }
            
            .tab {
                padding: 10px;
                font-size: 14px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            input, select, textarea {
                padding: 10px;
                font-size: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h2>TG KILLER</h2>
            <p>by @russianplanter</p>
        </div>
        
        <div class="tabs">
            <div class="tab active" onclick="openTab('account')">Аккаунты</div>
            <div class="tab" onclick="openTab('channel')">Каналы</div>
            <div class="tab" onclick="openTab('bot')">Боты</div>
        </div>
        
        <!-- Аккаунты -->
        <div id="account" class="tab-content active">
            <form id="accountForm">
                <div class="form-group">
                    <label for="accountType">Тип жалобы:</label>
                    <select id="accountType" required onchange="toggleAccountFields()">
                        <option value="spam">Спам</option>
                        <option value="doxing">Доксинг</option>
                        <option value="abuse">Оскорбления</option>
                        <option value="session">Удаление сессий</option>
                        <option value="premium">Премка для спама</option>
                        <option value="virtual">Вирт номер</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="accountUsername">Юзернейм (с @):</label>
                    <input type="text" id="accountUsername" placeholder="@username" required>
                </div>
                
                <div class="form-group">
                    <label for="accountId">ID аккаунта:</label>
                    <input type="text" id="accountId" placeholder="123456789" required>
                </div>
                
                <div id="accountExtraFields">
                    <div class="form-group">
                        <label for="accountChatLink">Ссылка на чат:</label>
                        <input type="text" id="accountChatLink" placeholder="https://t.me/chat">
                    </div>
                    
                    <div class="form-group">
                        <label for="accountViolationLink">Ссылка на нарушение:</label>
                        <input type="text" id="accountViolationLink" placeholder="https://t.me/...">
                    </div>
                </div>
                
                <button type="submit" id="accountSubmit">Отправить жалобу</button>
            </form>
            
            <div id="accountStatus" class="status"></div>
            <div id="accountLoading" class="loading">
                <div class="spinner"></div>
                <p>Отправка жалоб...</p>
            </div>
        </div>
        
        <!-- Каналы -->
        <div id="channel" class="tab-content">
            <form id="channelForm">
                <div class="form-group">
                    <label for="channelType">Тип жалобы:</label>
                    <select id="channelType" required>
                        <option value="personal_data">Личные данные</option>
                        <option value="animal_abuse">Жестокость</option>
                        <option value="cp">Запрещенный контент</option>
                        <option value="drugs">Продажа запрещенных веществ</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="channelLink">Ссылка на канал:</label>
                    <input type="text" id="channelLink" placeholder="https://t.me/channel" required>
                </div>
                
                <div class="form-group">
                    <label for="channelViolationLink">Ссылка на нарушение:</label>
                    <input type="text" id="channelViolationLink" placeholder="https://t.me/..." required>
                </div>
                
                <button type="submit" id="channelSubmit">Отправить жалобу</button>
            </form>
            
            <div id="channelStatus" class="status"></div>
            <div id="channelLoading" class="loading">
                <div class="spinner"></div>
                <p>Отправка жалоб...</p>
            </div>
        </div>
        
        <!-- Боты -->
        <div id="bot" class="tab-content">
            <form id="botForm">
                <div class="form-group">
                    <label for="botType">Тип жалобы:</label>
                    <select id="botType" required>
                        <option value="bot_doxing">Бот для доксинга</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="botUsername">Юзернейм бота (с @):</label>
                    <input type="text" id="botUsername" placeholder="@bot_username" required>
                </div>
                
                <button type="submit" id="botSubmit">Отправить жалобу</button>
            </form>
            
            <div id="botStatus" class="status"></div>
            <div id="botLoading" class="loading">
                <div class="spinner"></div>
                <p>Отправка жалоб...</p>
            </div>
        </div>
        
        <div class="footer">
            Используйте только в образовательных целях
        </div>
    </div>

    <script>
        // Инициализация WebApp Telegram
        const tg = window.Telegram.WebApp;
        
        // Включаем полноэкранный режим
        tg.expand();
        
        // Показываем кнопку "Назад"
        tg.BackButton.show();
        tg.BackButton.onClick(() => {
            tg.close();
        });
        
        // Функция для переключения вкладок
        function openTab(tabName) {
            // Скрыть все вкладки
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Деактивировать все табы
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Показать выбранную вкладку
            document.getElementById(tabName).classList.add('active');
            
            // Активировать выбранный таб
            event.currentTarget.classList.add('active');
        }
        
        // Показываем/скрываем дополнительные поля для аккаунтов
        function toggleAccountFields() {
            const accountType = document.getElementById('accountType').value;
            const extraFields = document.getElementById('accountExtraFields');
            const chatLink = document.getElementById('accountChatLink');
            const violationLink = document.getElementById('accountViolationLink');
            
            if (['spam', 'doxing', 'abuse'].includes(accountType)) {
                extraFields.style.display = 'block';
                chatLink.required = true;
                violationLink.required = true;
            } else {
                extraFields.style.display = 'none';
                chatLink.required = false;
                violationLink.required = false;
            }
        }
        
        // Функция для отправки жалобы
        async function sendComplaint(type, data) {
            // Здесь будет код для отправки данных на сервер
            // В реальном приложении нужно заменить на реальный API endpoint
            
            // Эмуляция отправки (для демонстрации)
            return new Promise((resolve) => {
                setTimeout(() => {
                    resolve({
                        status: 'success',
                        message: 'Жалоба успешно отправлена!'
                    });
                }, 2000);
            });
        }
        
        // Обработчики отправки форм
        document.getElementById('accountForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            await handleFormSubmit('account');
        });
        
        document.getElementById('channelForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            await handleFormSubmit('channel');
        });
        
        document.getElementById('botForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            await handleFormSubmit('bot');
        });
        
        // Общий обработчик для всех форм
        async function handleFormSubmit(formType) {
            const form = document.getElementById(`${formType}Form`);
            const loading = document.getElementById(`${formType}Loading`);
            const status = document.getElementById(`${formType}Status`);
            const submitBtn = document.getElementById(`${formType}Submit`);
            
            // Собираем данные
            let type, data;
            
            if (formType === 'account') {
                type = document.getElementById('accountType').value;
                data = {
                    username: document.getElementById('accountUsername').value.trim(),
                    user_id: document.getElementById('accountId').value.trim()
                };
                
                if (['spam', 'doxing', 'abuse'].includes(type)) {
                    data.chat_link = document.getElementById('accountChatLink').value.trim();
                    data.violation_link = document.getElementById('accountViolationLink').value.trim();
                }
            } 
            else if (formType === 'channel') {
                type = document.getElementById('channelType').value;
                data = {
                    channel_link: document.getElementById('channelLink').value.trim(),
                    violation_link: document.getElementById('channelViolationLink').value.trim()
                };
            } 
            else if (formType === 'bot') {
                type = document.getElementById('botType').value;
                data = {
                    bot_username: document.getElementById('botUsername').value.trim()
                };
            }
            
            // Показываем загрузку
            loading.style.display = 'block';
            status.style.display = 'none';
            submitBtn.disabled = true;
            
            try {
                // Отправляем данные
                const result = await sendComplaint(type, data);
                
                // Обрабатываем результат
                if (result.status === 'success') {
                    status.className = 'status success';
                    status.textContent = result.message;
                    form.reset();
                } else {
                    status.className = 'status error';
                    status.textContent = 'Ошибка: ' + (result.message || 'Неизвестная ошибка');
                }
            } catch (error) {
                console.error('Ошибка:', error);
                status.className = 'status error';
                status.textContent = 'Ошибка соединения. Попробуйте позже.';
            } finally {
                loading.style.display = 'none';
                status.style.display = 'block';
                submitBtn.disabled = false;
                
                // Прокручиваем к статусу
                status.scrollIntoView({ behavior: 'smooth' });
            }
        }
        
        // Инициализация при загрузке
        document.addEventListener('DOMContentLoaded', function() {
            // Инициализация полей для аккаунтов
            toggleAccountFields();
            
            // Установка цвета фона Telegram
            if (tg.colorScheme) {
                document.documentElement.style.setProperty('--secondary-color', tg.themeParams.bg_color || '#f5f5f5');
                document.documentElement.style.setProperty('--text-color', tg.themeParams.text_color || '#333333');
            }
        });
    </script>
</body>
</html>
